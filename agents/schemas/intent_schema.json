{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Intent Schema",
  "description": "Intent taxonomy and agent mapping for AI Shopping Assistant - Operational Reference",
  "type": "object",
  "properties": {
    "intentTaxonomy": {
      "type": "object",
      "description": "Complete intent taxonomy",
      "properties": {
        "consumer": {
          "type": "object",
          "properties": {
            "search_product": {
              "type": "object",
              "properties": {
                "description": {
                  "type": "string",
                  "const": "Search for products"
                },
                "defaultAgent": {
                  "type": "string",
                  "const": "12_product_search"
                },
                "requiredSlots": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": ["search_query"]
                },
                "responsePreference": {
                  "type": "string",
                  "enum": ["ANSWER", "BRIEFING_WITH_PRODUCTS", "MONGO_QUERY", "TOOL_CALL", "NEED_MORE_INFO"],
                  "default": "BRIEFING_WITH_PRODUCTS"
                },
                "toolCandidate": {
                  "type": "string",
                  "enum": ["addToCart", "toggleWishlist", null],
                  "default": null
                }
              },
              "required": ["description", "defaultAgent", "requiredSlots", "responsePreference"]
            },
            "get_recommendation": {
              "type": "object",
              "properties": {
                "description": {
                  "type": "string",
                  "const": "Get product recommendations"
                },
                "defaultAgent": {
                  "type": "string",
                  "const": "13_reco_fit"
                },
                "requiredSlots": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": ["category"]
                },
                "responsePreference": {
                  "type": "string",
                  "enum": ["ANSWER", "BRIEFING_WITH_PRODUCTS", "MONGO_QUERY", "TOOL_CALL", "NEED_MORE_INFO"],
                  "default": "BRIEFING_WITH_PRODUCTS"
                },
                "toolCandidate": {
                  "type": ["string", "null"],
                  "enum": ["addToCart", "toggleWishlist", null],
                  "default": null
                }
              },
              "required": ["description", "defaultAgent", "requiredSlots", "responsePreference"]
            },
            "compare_price": {
              "type": "object",
              "properties": {
                "description": {
                  "type": "string",
                  "const": "Compare prices across products"
                },
                "defaultAgent": {
                  "type": "string",
                  "const": "14_price_compare"
                },
                "requiredSlots": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": ["product_ids"]
                },
                "responsePreference": {
                  "type": "string",
                  "enum": ["ANSWER", "BRIEFING_WITH_PRODUCTS", "MONGO_QUERY", "TOOL_CALL", "NEED_MORE_INFO"],
                  "default": "ANSWER"
                },
                "toolCandidate": {
                  "type": ["string", "null"],
                  "default": null
                }
              },
              "required": ["description", "defaultAgent", "requiredSlots", "responsePreference"]
            },
            "add_to_cart": {
              "type": "object",
              "properties": {
                "description": {
                  "type": "string",
                  "const": "Add product to cart"
                },
                "defaultAgent": {
                  "type": "string",
                  "const": "15_order_flow"
                },
                "requiredSlots": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": ["productId", "quantity"]
                },
                "responsePreference": {
                  "type": "string",
                  "enum": ["ANSWER", "BRIEFING_WITH_PRODUCTS", "MONGO_QUERY", "TOOL_CALL", "NEED_MORE_INFO"],
                  "default": "TOOL_CALL"
                },
                "toolCandidate": {
                  "type": "string",
                  "enum": ["addToCart"],
                  "default": "addToCart"
                }
              },
              "required": ["description", "defaultAgent", "requiredSlots", "responsePreference"]
            },
            "purchase": {
              "type": "object",
              "properties": {
                "description": {
                  "type": "string",
                  "const": "Purchase products"
                },
                "defaultAgent": {
                  "type": "string",
                  "const": "15_order_flow"
                },
                "requiredSlots": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": ["cartId"]
                },
                "responsePreference": {
                  "type": "string",
                  "enum": ["ANSWER", "BRIEFING_WITH_PRODUCTS", "MONGO_QUERY", "TOOL_CALL", "NEED_MORE_INFO"],
                  "default": "TOOL_CALL"
                },
                "toolCandidate": {
                  "type": "string",
                  "enum": ["goToCheckout"],
                  "default": "goToCheckout"
                }
              },
              "required": ["description", "defaultAgent", "requiredSlots", "responsePreference"]
            },
            "track_delivery": {
              "type": "object",
              "properties": {
                "description": {
                  "type": "string",
                  "const": "Track delivery status"
                },
                "defaultAgent": {
                  "type": "string",
                  "const": "15_order_flow"
                },
                "requiredSlots": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": ["orderId"]
                },
                "responsePreference": {
                  "type": "string",
                  "enum": ["ANSWER", "BRIEFING_WITH_PRODUCTS", "MONGO_QUERY", "TOOL_CALL", "NEED_MORE_INFO"],
                  "default": "ANSWER"
                },
                "toolCandidate": {
                  "type": ["string", "null"],
                  "default": null
                }
              },
              "required": ["description", "defaultAgent", "requiredSlots", "responsePreference"]
            },
            "cancel_order": {
              "type": "object",
              "properties": {
                "description": {
                  "type": "string",
                  "const": "Cancel order"
                },
                "defaultAgent": {
                  "type": "string",
                  "const": "16_after_sales"
                },
                "requiredSlots": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": ["orderId"]
                },
                "responsePreference": {
                  "type": "string",
                  "enum": ["ANSWER", "BRIEFING_WITH_PRODUCTS", "MONGO_QUERY", "TOOL_CALL", "NEED_MORE_INFO"],
                  "default": "TOOL_CALL"
                },
                "toolCandidate": {
                  "type": "string",
                  "enum": ["requestCancel"],
                  "default": "requestCancel"
                }
              },
              "required": ["description", "defaultAgent", "requiredSlots", "responsePreference"]
            },
            "refund_request": {
              "type": "object",
              "properties": {
                "description": {
                  "type": "string",
                  "const": "Request refund"
                },
                "defaultAgent": {
                  "type": "string",
                  "const": "16_after_sales"
                },
                "requiredSlots": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": ["orderId", "reason"]
                },
                "responsePreference": {
                  "type": "string",
                  "enum": ["ANSWER", "BRIEFING_WITH_PRODUCTS", "MONGO_QUERY", "TOOL_CALL", "NEED_MORE_INFO"],
                  "default": "TOOL_CALL"
                },
                "toolCandidate": {
                  "type": "string",
                  "enum": ["requestRefund"],
                  "default": "requestRefund"
                }
              },
              "required": ["description", "defaultAgent", "requiredSlots", "responsePreference"]
            },
            "write_review": {
              "type": "object",
              "properties": {
                "description": {
                  "type": "string",
                  "const": "Write product review"
                },
                "defaultAgent": {
                  "type": "string",
                  "const": "17_review_assistant"
                },
                "requiredSlots": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": ["productId", "rating"]
                },
                "responsePreference": {
                  "type": "string",
                  "enum": ["ANSWER", "BRIEFING_WITH_PRODUCTS", "MONGO_QUERY", "TOOL_CALL", "NEED_MORE_INFO"],
                  "default": "ANSWER"
                },
                "toolCandidate": {
                  "type": ["string", "null"],
                  "default": null
                }
              },
              "required": ["description", "defaultAgent", "requiredSlots", "responsePreference"]
            },
            "check_rewards": {
              "type": "object",
              "properties": {
                "description": {
                  "type": "string",
                  "const": "Check points and discounts"
                },
                "defaultAgent": {
                  "type": "string",
                  "const": "18_account_rewards"
                },
                "requiredSlots": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": []
                },
                "responsePreference": {
                  "type": "string",
                  "enum": ["ANSWER", "BRIEFING_WITH_PRODUCTS", "MONGO_QUERY", "TOOL_CALL", "NEED_MORE_INFO"],
                  "default": "ANSWER"
                },
                "toolCandidate": {
                  "type": ["string", "null"],
                  "default": null
                }
              },
              "required": ["description", "defaultAgent", "requiredSlots", "responsePreference"]
            },
            "login_help": {
              "type": "object",
              "properties": {
                "description": {
                  "type": "string",
                  "const": "Get help with login"
                },
                "defaultAgent": {
                  "type": "string",
                  "const": "00_orchestrator"
                },
                "requiredSlots": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": []
                },
                "responsePreference": {
                  "type": "string",
                  "enum": ["ANSWER", "BRIEFING_WITH_PRODUCTS", "MONGO_QUERY", "TOOL_CALL", "NEED_MORE_INFO"],
                  "default": "ANSWER"
                },
                "toolCandidate": {
                  "type": ["string", "null"],
                  "default": null
                }
              },
              "required": ["description", "defaultAgent", "requiredSlots", "responsePreference"]
            },
            "signup_help": {
              "type": "object",
              "properties": {
                "description": {
                  "type": "string",
                  "const": "Get help with signup"
                },
                "defaultAgent": {
                  "type": "string",
                  "const": "00_orchestrator"
                },
                "requiredSlots": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": []
                },
                "responsePreference": {
                  "type": "string",
                  "enum": ["ANSWER", "BRIEFING_WITH_PRODUCTS", "MONGO_QUERY", "TOOL_CALL", "NEED_MORE_INFO"],
                  "default": "ANSWER"
                },
                "toolCandidate": {
                  "type": ["string", "null"],
                  "default": null
                }
              },
              "required": ["description", "defaultAgent", "requiredSlots", "responsePreference"]
            }
          },
          "required": [
            "search_product",
            "get_recommendation",
            "compare_price",
            "add_to_cart",
            "purchase",
            "track_delivery",
            "cancel_order",
            "refund_request",
            "write_review",
            "check_rewards",
            "login_help",
            "signup_help"
          ]
        },
        "seller": {
          "type": "object",
          "properties": {
            "seller_analytics": {
              "type": "object",
              "properties": {
                "description": {
                  "type": "string",
                  "const": "Analyze sales and revenue"
                },
                "defaultAgent": {
                  "type": "string",
                  "const": "20_seller_analytics"
                },
                "requiredSlots": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": ["period"]
                },
                "responsePreference": {
                  "type": "string",
                  "enum": ["ANSWER", "BRIEFING_WITH_PRODUCTS", "MONGO_QUERY", "TOOL_CALL", "NEED_MORE_INFO"],
                  "default": "ANSWER"
                },
                "toolCandidate": {
                  "type": ["string", "null"],
                  "default": null
                }
              },
              "required": ["description", "defaultAgent", "requiredSlots", "responsePreference"]
            },
            "simulate_pricing": {
              "type": "object",
              "properties": {
                "description": {
                  "type": "string",
                  "const": "Simulate pricing scenarios"
                },
                "defaultAgent": {
                  "type": "string",
                  "const": "21_pricing_simulator"
                },
                "requiredSlots": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": ["productId", "newPrice"]
                },
                "responsePreference": {
                  "type": "string",
                  "enum": ["ANSWER", "BRIEFING_WITH_PRODUCTS", "MONGO_QUERY", "TOOL_CALL", "NEED_MORE_INFO"],
                  "default": "ANSWER"
                },
                "toolCandidate": {
                  "type": ["string", "null"],
                  "default": null
                }
              },
              "required": ["description", "defaultAgent", "requiredSlots", "responsePreference"]
            },
            "analyze_efficiency": {
              "type": "object",
              "properties": {
                "description": {
                  "type": "string",
                  "const": "Analyze product efficiency"
                },
                "defaultAgent": {
                  "type": "string",
                  "const": "22_product_efficiency"
                },
                "requiredSlots": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": []
                },
                "responsePreference": {
                  "type": "string",
                  "enum": ["ANSWER", "BRIEFING_WITH_PRODUCTS", "MONGO_QUERY", "TOOL_CALL", "NEED_MORE_INFO"],
                  "default": "ANSWER"
                },
                "toolCandidate": {
                  "type": ["string", "null"],
                  "default": null
                }
              },
              "required": ["description", "defaultAgent", "requiredSlots", "responsePreference"]
            },
            "create_listing": {
              "type": "object",
              "properties": {
                "description": {
                  "type": "string",
                  "const": "Create product listing"
                },
                "defaultAgent": {
                  "type": "string",
                  "const": "23_listing_assistant"
                },
                "requiredSlots": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": ["name", "price", "category"]
                },
                "responsePreference": {
                  "type": "string",
                  "enum": ["ANSWER", "BRIEFING_WITH_PRODUCTS", "MONGO_QUERY", "TOOL_CALL", "NEED_MORE_INFO"],
                  "default": "TOOL_CALL"
                },
                "toolCandidate": {
                  "type": "string",
                  "enum": ["sellerProductRegister"],
                  "default": "sellerProductRegister"
                }
              },
              "required": ["description", "defaultAgent", "requiredSlots", "responsePreference"]
            }
          },
          "required": [
            "seller_analytics",
            "simulate_pricing",
            "analyze_efficiency",
            "create_listing"
          ]
        },
        "behavior": {
          "type": "object",
          "properties": {
            "spend_analysis": {
              "type": "object",
              "properties": {
                "description": {
                  "type": "string",
                  "const": "Analyze spending patterns"
                },
                "defaultAgent": {
                  "type": "string",
                  "const": "30_spend_behavior_analyst"
                },
                "requiredSlots": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": ["period"]
                },
                "responsePreference": {
                  "type": "string",
                  "enum": ["ANSWER", "BRIEFING_WITH_PRODUCTS", "MONGO_QUERY", "TOOL_CALL", "NEED_MORE_INFO"],
                  "default": "ANSWER"
                },
                "toolCandidate": {
                  "type": ["string", "null"],
                  "default": null
                }
              },
              "required": ["description", "defaultAgent", "requiredSlots", "responsePreference"]
            },
            "reflection": {
              "type": "object",
              "properties": {
                "description": {
                  "type": "string",
                  "const": "Reflection and coaching"
                },
                "defaultAgent": {
                  "type": "string",
                  "const": "31_reflection_coach"
                },
                "requiredSlots": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": []
                },
                "responsePreference": {
                  "type": "string",
                  "enum": ["ANSWER", "BRIEFING_WITH_PRODUCTS", "MONGO_QUERY", "TOOL_CALL", "NEED_MORE_INFO"],
                  "default": "ANSWER"
                },
                "toolCandidate": {
                  "type": ["string", "null"],
                  "default": null
                }
              },
              "required": ["description", "defaultAgent", "requiredSlots", "responsePreference"]
            }
          },
          "required": [
            "spend_analysis",
            "reflection"
          ]
        },
        "common": {
          "type": "object",
          "properties": {
            "greeting": {
              "type": "object",
              "properties": {
                "description": {
                  "type": "string",
                  "const": "Greeting"
                },
                "defaultAgent": {
                  "type": "string",
                  "const": "00_orchestrator"
                },
                "requiredSlots": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": []
                },
                "responsePreference": {
                  "type": "string",
                  "enum": ["ANSWER", "BRIEFING_WITH_PRODUCTS", "MONGO_QUERY", "TOOL_CALL", "NEED_MORE_INFO"],
                  "default": "ANSWER"
                }
              },
              "required": ["description", "defaultAgent", "requiredSlots", "responsePreference"]
            },
            "thank_you": {
              "type": "object",
              "properties": {
                "description": {
                  "type": "string",
                  "const": "Thank you expression"
                },
                "defaultAgent": {
                  "type": "string",
                  "const": "00_orchestrator"
                },
                "requiredSlots": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": []
                },
                "responsePreference": {
                  "type": "string",
                  "enum": ["ANSWER", "BRIEFING_WITH_PRODUCTS", "MONGO_QUERY", "TOOL_CALL", "NEED_MORE_INFO"],
                  "default": "ANSWER"
                }
              },
              "required": ["description", "defaultAgent", "requiredSlots", "responsePreference"]
            },
            "goodbye": {
              "type": "object",
              "properties": {
                "description": {
                  "type": "string",
                  "const": "Goodbye"
                },
                "defaultAgent": {
                  "type": "string",
                  "const": "00_orchestrator"
                },
                "requiredSlots": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": []
                },
                "responsePreference": {
                  "type": "string",
                  "enum": ["ANSWER", "BRIEFING_WITH_PRODUCTS", "MONGO_QUERY", "TOOL_CALL", "NEED_MORE_INFO"],
                  "default": "ANSWER"
                }
              },
              "required": ["description", "defaultAgent", "requiredSlots", "responsePreference"]
            },
            "clarification": {
              "type": "object",
              "properties": {
                "description": {
                  "type": "string",
                  "const": "Request clarification"
                },
                "defaultAgent": {
                  "type": "string",
                  "const": "10_intent_router"
                },
                "requiredSlots": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": []
                },
                "responsePreference": {
                  "type": "string",
                  "enum": ["ANSWER", "BRIEFING_WITH_PRODUCTS", "MONGO_QUERY", "TOOL_CALL", "NEED_MORE_INFO"],
                  "default": "NEED_MORE_INFO"
                }
              },
              "required": ["description", "defaultAgent", "requiredSlots", "responsePreference"]
            },
            "unknown": {
              "type": "object",
              "properties": {
                "description": {
                  "type": "string",
                  "const": "Unknown intent"
                },
                "defaultAgent": {
                  "type": "string",
                  "const": "10_intent_router"
                },
                "requiredSlots": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": []
                },
                "responsePreference": {
                  "type": "string",
                  "enum": ["ANSWER", "BRIEFING_WITH_PRODUCTS", "MONGO_QUERY", "TOOL_CALL", "NEED_MORE_INFO"],
                  "default": "NEED_MORE_INFO"
                }
              },
              "required": ["description", "defaultAgent", "requiredSlots", "responsePreference"]
            }
          },
          "required": [
            "greeting",
            "thank_you",
            "goodbye",
            "clarification",
            "unknown"
          ]
        }
      },
      "required": ["consumer", "seller", "behavior", "common"]
    },
    "agentMapping": {
      "type": "object",
      "description": "Intent to agent mapping (for quick lookup)",
      "additionalProperties": {
        "type": "string"
      }
    }
  },
  "required": ["intentTaxonomy", "agentMapping"]
}
